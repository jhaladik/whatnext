exports.id=43,exports.ids=[43],exports.modules={2704:()=>{},3400:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,5227,23)),Promise.resolve().then(c.t.bind(c,6346,23)),Promise.resolve().then(c.t.bind(c,7924,23)),Promise.resolve().then(c.t.bind(c,99,23)),Promise.resolve().then(c.t.bind(c,8243,23)),Promise.resolve().then(c.t.bind(c,8827,23)),Promise.resolve().then(c.t.bind(c,2763,23)),Promise.resolve().then(c.t.bind(c,7173,23)),Promise.resolve().then(c.bind(c,5587))},4398:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(2688).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},5143:()=>{},6055:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(1658);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},6895:()=>{},7760:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(2688).A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},8014:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>i,metadata:()=>g,viewport:()=>h});var d=c(7413),e=c(1421),f=c.n(e);c(2704);let g={title:"WhatNext - Find Your Perfect Movie",description:"AI-powered movie recommendations that understand your mood",manifest:"/manifest.json",openGraph:{title:"WhatNext - Find Your Perfect Movie",description:"AI-powered movie recommendations that understand your mood",type:"website"}},h={width:"device-width",initialScale:1,themeColor:"#a855f7"};function i({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{className:`${f().className} antialiased`,children:a})})}},8363:(a,b,c)=>{"use strict";c.d(b,{F:()=>e});class d{constructor(){this.sessionId=null,this.baseURL="",console.log("[API] Using Pages Functions (same domain)")}async startSession(a){console.log("[API] Starting session with URL:",`${this.baseURL}/api/movies/start`),console.log("[API] Options:",a);let b=await fetch(`${this.baseURL}/api/movies/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a||{})});if(console.log("[API] Response status:",b.status),!b.ok)throw console.error("[API] Error response:",await b.text()),Error(`Failed to start session: ${b.statusText}`);let c=await b.json();return console.log("[API] Response data:",c),this.sessionId=c.sessionId,c}async submitAnswer(a,b,c){if(!this.sessionId)throw Error("No active session");let d=await fetch(`${this.baseURL}/api/movies/answer/${this.sessionId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionId:a,answer:b,responseTime:c})});if(!d.ok)throw Error(`Failed to submit answer: ${d.statusText}`);return d.json()}async refineRecommendations(a,b){if(!this.sessionId)throw Error("No active session");let c=await fetch(`${this.baseURL}/api/movies/refine/${this.sessionId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:a,action:b})});if(!c.ok)throw Error(`Failed to refine recommendations: ${c.statusText}`);return c.json()}async quickAdjust(a){if(!this.sessionId)throw Error("No active session");let b=await fetch(`${this.baseURL}/api/movies/adjust/${this.sessionId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adjustmentType:a})});if(!b.ok)throw Error(`Failed to adjust: ${b.statusText}`);return b.json()}async validateMoment(a,b){if(!this.sessionId)throw Error("No active session");let c=await fetch(`${this.baseURL}/api/movies/validate/${this.sessionId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedbackType:a,response:b})});if(!c.ok)throw Error(`Failed to validate moment: ${c.statusText}`);return c.json()}async getMomentSummary(){if(!this.sessionId)throw Error("No active session");let a=await fetch(`${this.baseURL}/api/movies/moment/${this.sessionId}`);if(!a.ok)throw Error(`Failed to get moment summary: ${a.statusText}`);return a.json()}async trackInteraction(a,b,c){if(!this.sessionId)throw Error("No active session");let d=await fetch(`${this.baseURL}/api/movies/interaction/${this.sessionId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({movieId:a,interactionType:b,metadata:c})});if(!d.ok)throw Error(`Failed to track interaction: ${d.statusText}`);return d.json()}async getMovieDetails(a){let b=await fetch(`${this.baseURL}/api/movies/${a}`);if(!b.ok)throw Error(`Failed to get movie details: ${b.statusText}`);return b.json()}async getAnalytics(a){let b=await fetch(`${this.baseURL}/api/analytics/${a}`);if(!b.ok)throw Error(`Failed to get analytics: ${b.statusText}`);return b.json()}setSessionId(a){this.sessionId=a}getSessionId(){return this.sessionId}clearSession(){this.sessionId=null}}let e=new d},8440:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(2688).A)("film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]])},8920:(a,b,c)=>{"use strict";c.d(b,{N:()=>s});var d=c(687),e=c(3210),f=c(2157),g=c(2789),h=c(2743),i=c(1279),j=c(552),k=c(2582);class l extends e.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent){let a=b.offsetParent,c=(0,j.s)(a)&&a.offsetWidth||0,d=this.props.sizeRef.current;d.height=b.offsetHeight||0,d.width=b.offsetWidth||0,d.top=b.offsetTop,d.left=b.offsetLeft,d.right=c-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m({children:a,isPresent:b,anchorX:c,root:f}){let g=(0,e.useId)(),h=(0,e.useRef)(null),i=(0,e.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:j}=(0,e.useContext)(k.Q);return(0,e.useInsertionEffect)(()=>{let{width:a,height:d,top:e,left:k,right:l}=i.current;if(b||!h.current||!a||!d)return;let m="left"===c?`left: ${k}`:`right: ${l}`;h.current.dataset.motionPopId=g;let n=document.createElement("style");j&&(n.nonce=j);let o=f??document.head;return o.appendChild(n),n.sheet&&n.sheet.insertRule(`
          [data-motion-pop-id="${g}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${d}px !important;
            ${m}px !important;
            top: ${e}px !important;
          }
        `),()=>{o.contains(n)&&o.removeChild(n)}},[b]),(0,d.jsx)(l,{isPresent:b,childRef:h,sizeRef:i,children:e.cloneElement(a,{ref:h})})}let n=({children:a,initial:b,isPresent:c,onExitComplete:f,custom:h,presenceAffectsLayout:j,mode:k,anchorX:l,root:n})=>{let p=(0,g.M)(o),q=(0,e.useId)(),r=!0,s=(0,e.useMemo)(()=>(r=!1,{id:q,initial:b,isPresent:c,custom:h,onExitComplete:a=>{for(let b of(p.set(a,!0),p.values()))if(!b)return;f&&f()},register:a=>(p.set(a,!1),()=>p.delete(a))}),[c,p,f]);return j&&r&&(s={...s}),(0,e.useMemo)(()=>{p.forEach((a,b)=>p.set(b,!1))},[c]),e.useEffect(()=>{c||p.size||!f||f()},[c]),"popLayout"===k&&(a=(0,d.jsx)(m,{isPresent:c,anchorX:l,root:n,children:a})),(0,d.jsx)(i.t.Provider,{value:s,children:a})};function o(){return new Map}var p=c(6044);let q=a=>a.key||"";function r(a){let b=[];return e.Children.forEach(a,a=>{(0,e.isValidElement)(a)&&b.push(a)}),b}let s=({children:a,custom:b,initial:c=!0,onExitComplete:i,presenceAffectsLayout:j=!0,mode:k="sync",propagate:l=!1,anchorX:m="left",root:o})=>{let[s,t]=(0,p.xQ)(l),u=(0,e.useMemo)(()=>r(a),[a]),v=l&&!s?[]:u.map(q),w=(0,e.useRef)(!0),x=(0,e.useRef)(u),y=(0,g.M)(()=>new Map),[z,A]=(0,e.useState)(u),[B,C]=(0,e.useState)(u);(0,h.E)(()=>{w.current=!1,x.current=u;for(let a=0;a<B.length;a++){let b=q(B[a]);v.includes(b)?y.delete(b):!0!==y.get(b)&&y.set(b,!1)}},[B,v.length,v.join("-")]);let D=[];if(u!==z){let a=[...u];for(let b=0;b<B.length;b++){let c=B[b],d=q(c);v.includes(d)||(a.splice(b,0,c),D.push(c))}return"wait"===k&&D.length&&(a=D),C(r(a)),A(u),null}let{forceRender:E}=(0,e.useContext)(f.L);return(0,d.jsx)(d.Fragment,{children:B.map(a=>{let e=q(a),f=(!l||!!s)&&(u===B||v.includes(e));return(0,d.jsx)(n,{isPresent:f,initial:(!w.current||!!c)&&void 0,custom:b,presenceAffectsLayout:j,mode:k,root:o,onExitComplete:f?void 0:()=>{if(!y.has(e))return;y.set(e,!0);let a=!0;y.forEach(b=>{b||(a=!1)}),a&&(E?.(),C(x.current),l&&t?.(),i&&i())},anchorX:m,children:a},e)})})}},9465:(a,b,c)=>{"use strict";c.d(b,{W:()=>g});var d=c(6787),e=c(9350),f=c(8363);let g=(0,d.v)()((0,e.lt)((0,e.Zr)((a,b)=>({sessionId:null,domain:"movies",questionFlow:"standard",questions:[],currentQuestionIndex:0,answers:{},recommendations:[],moment:null,validation:null,emotionalProfile:null,isLoading:!1,error:null,startSession:async(b={})=>{console.log("[Store] Starting session with options:",b),a({isLoading:!0,error:null});try{console.log("[Store] Calling API...");let c=await f.F.startSession(b);console.log("[Store] API Response:",c),a({sessionId:c.sessionId,questions:[c.question],currentQuestionIndex:0,domain:c.domain,questionFlow:c.flowType,isLoading:!1,recommendations:[],answers:{},moment:null,validation:null,emotionalProfile:null}),console.log("[Store] State updated successfully")}catch(b){throw console.error("[Store] Error:",b),a({error:b.message,isLoading:!1}),b}},submitAnswer:async(c,d,e)=>{a({isLoading:!0});try{let g=await f.F.submitAnswer(c,d,e),{answers:h,currentQuestionIndex:i}=b();if(a({answers:{...h,[c]:d},currentQuestionIndex:i+1,isLoading:!1}),"recommendations"===g.type)a({recommendations:g.recommendations,moment:g.moment,validation:g.validation});else if(g.question){let{questions:c}=b();c.find(a=>a.id===g.question.id)||a({questions:[...c,g.question]})}}catch(b){a({error:b.message,isLoading:!1})}},refineRecommendations:async c=>{a({isLoading:!0});try{let b=await f.F.refineRecommendations(c);a({recommendations:b.recommendations,isLoading:!1})}catch(c){c.message.includes("401")||c.message.includes("expired")?b().reset():a({error:c.message,isLoading:!1})}},quickAdjust:async c=>{a({isLoading:!0});try{let b=await f.F.quickAdjust(c);a({recommendations:b.recommendations,isLoading:!1})}catch(c){c.message.includes("401")||c.message.includes("expired")?b().reset():a({error:c.message,isLoading:!1})}},validateMoment:async a=>{try{await f.F.validateMoment("overall_impression",a)}catch(a){console.error("Failed to validate moment:",a)}},trackInteraction:async(a,b)=>{console.log(`[Interaction] ${b} on movie ${a}`)},loadFromStorage:b=>{b.sessionId&&f.F.setSessionId(b.sessionId),a({sessionId:b.sessionId||null,recommendations:b.recommendations||[],moment:b.moment||null,validation:b.validation||null,emotionalProfile:b.emotionalProfile||null,isLoading:!1,error:null}),console.log("[Store] Loaded data from storage:",{sessionId:b.sessionId,recommendationsCount:b.recommendations?.length||0})},reset:()=>{f.F.clearSession(),a({sessionId:null,questions:[],currentQuestionIndex:0,answers:{},recommendations:[],moment:null,validation:null,emotionalProfile:null,isLoading:!1,error:null})}}),{name:"recommendation-storage",partialize:a=>({sessionId:a.sessionId})})))},9848:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,6133,23)),Promise.resolve().then(c.t.bind(c,6444,23)),Promise.resolve().then(c.t.bind(c,6042,23)),Promise.resolve().then(c.t.bind(c,9477,23)),Promise.resolve().then(c.t.bind(c,9345,23)),Promise.resolve().then(c.t.bind(c,2089,23)),Promise.resolve().then(c.t.bind(c,6577,23)),Promise.resolve().then(c.t.bind(c,1307,23)),Promise.resolve().then(c.t.bind(c,4817,23))}};