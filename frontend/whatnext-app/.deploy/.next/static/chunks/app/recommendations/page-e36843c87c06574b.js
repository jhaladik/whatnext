(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[885],{844:(e,s,t)=>{"use strict";t.d(s,{W:()=>n});var a=t(5453),i=t(6786),o=t(8897);let n=(0,a.v)()((0,i.lt)((0,i.Zr)((e,s)=>({sessionId:null,domain:"movies",questionFlow:"standard",questions:[],currentQuestionIndex:0,answers:{},recommendations:[],moment:null,validation:null,emotionalProfile:null,isLoading:!1,error:null,startSession:async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("[Store] Starting session with options:",s),e({isLoading:!0,error:null});try{console.log("[Store] Calling API...");let t=await o.F.startSession(s);console.log("[Store] API Response:",t),sessionStorage.setItem("whatnext_session_id",t.sessionId),sessionStorage.setItem("whatnext_session_data",JSON.stringify({questions:[t.question],domain:t.domain,flowType:t.flowType})),console.log("[Store] Saved to sessionStorage"),e({sessionId:t.sessionId,questions:[t.question],currentQuestionIndex:0,domain:t.domain,questionFlow:t.flowType,isLoading:!1,recommendations:[],answers:{},moment:null,validation:null,emotionalProfile:null}),console.log("[Store] State updated successfully")}catch(s){throw console.error("[Store] Error:",s),e({error:s.message,isLoading:!1}),s}},submitAnswer:async(t,a,i)=>{e({isLoading:!0});try{let n=await o.F.submitAnswer(t,a,i),{answers:r,currentQuestionIndex:l}=s();if(e({answers:{...r,[t]:a},currentQuestionIndex:l+1,isLoading:!1}),"recommendations"===n.type)e({recommendations:n.recommendations,moment:n.moment,validation:n.validation});else if(n.question){let{questions:t}=s();t.find(e=>e.id===n.question.id)||e({questions:[...t,n.question]})}}catch(s){e({error:s.message,isLoading:!1})}},refineRecommendations:async t=>{e({isLoading:!0});try{let s=await o.F.refineRecommendations(t);e({recommendations:s.recommendations,isLoading:!1})}catch(t){t.message.includes("401")||t.message.includes("expired")?(s().reset(),window.location.href="/"):e({error:t.message,isLoading:!1})}},quickAdjust:async t=>{e({isLoading:!0});try{let s=await o.F.quickAdjust(t);e({recommendations:s.recommendations,isLoading:!1})}catch(t){t.message.includes("401")||t.message.includes("expired")?(s().reset(),window.location.href="/"):e({error:t.message,isLoading:!1})}},validateMoment:async e=>{try{await o.F.validateMoment("overall_impression",e)}catch(e){console.error("Failed to validate moment:",e)}},trackInteraction:async(e,s)=>{console.log("[Interaction] ".concat(s," on movie ").concat(e))},loadFromStorage:s=>{var t;s.sessionId&&o.F.setSessionId(s.sessionId),e({sessionId:s.sessionId||null,recommendations:s.recommendations||[],moment:s.moment||null,validation:s.validation||null,emotionalProfile:s.emotionalProfile||null,isLoading:!1,error:null}),console.log("[Store] Loaded data from storage:",{sessionId:s.sessionId,recommendationsCount:(null==(t=s.recommendations)?void 0:t.length)||0})},reset:()=>{o.F.clearSession(),sessionStorage.removeItem("whatnext_session_id"),sessionStorage.removeItem("whatnext_session_data"),console.log("[Store] Cleared sessionStorage on reset"),e({sessionId:null,questions:[],currentQuestionIndex:0,answers:{},recommendations:[],moment:null,validation:null,emotionalProfile:null,isLoading:!1,error:null})}}),{name:"recommendation-storage",partialize:e=>({sessionId:e.sessionId})})))},4557:(e,s,t)=>{Promise.resolve().then(t.bind(t,6785))},6785:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>L});var a=t(5155),i=t(2115),o=t(5695),n=t(760),r=t(8274),l=t(3311),c=t(2568),d=t(1976),m=t(2657),h=t(4416),x=t(5690),u=t(8564),p=t(4186),g=t(7580),v=t(9074),f=t(3109);function y(e){var s;let{movie:t,index:o,reaction:n,onReaction:y}=e,[j,w]=(0,i.useState)(!1),b=e=>{y(e)},N=e=>e?e>=1e9?"$".concat((e/1e9).toFixed(1),"B"):e>=1e6?"$".concat((e/1e6).toFixed(1),"M"):e>=1e3?"$".concat((e/1e3).toFixed(0),"K"):"$".concat(e):"N/A";return(0,a.jsxs)(r.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*o},className:"relative group",style:{perspective:"1000px"},children:[t.isSurprise&&(0,a.jsx)(r.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1*o+.3},className:"absolute -top-2 -right-2 z-20",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg flex items-center",children:[(0,a.jsx)(l.A,{className:"w-3 h-3 mr-1"}),"Surprise Pick"]})}),(0,a.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>w(!j),className:"absolute top-2 right-2 z-20 p-2 bg-black/50 backdrop-blur rounded-full hover:bg-black/70 transition-colors",children:(0,a.jsx)(c.A,{className:"w-4 h-4 text-white ".concat(j?"rotate-180":""," transition-transform")})}),(0,a.jsxs)(r.P.div,{animate:{rotateY:180*!!j},transition:{duration:.6,type:"spring"},className:"relative w-full h-full",style:{transformStyle:"preserve-3d"},children:[(0,a.jsxs)("div",{className:"w-full h-full ".concat(j?"invisible":""),style:{backfaceVisibility:"hidden"},children:[(0,a.jsxs)("div",{className:"relative aspect-[2/3] rounded-xl overflow-hidden shadow-lg group-hover:shadow-2xl transition-shadow duration-300",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center",children:!t.poster&&(0,a.jsxs)("div",{className:"text-white text-center p-4",children:[(0,a.jsx)("svg",{className:"w-16 h-16 mx-auto mb-2 opacity-50",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z"})}),(0,a.jsx)("p",{className:"text-sm font-medium",children:t.title})]})}),t.poster&&(0,a.jsx)("img",{src:t.poster,alt:t.title,className:"absolute inset-0 w-full h-full object-cover",onError:e=>{console.error("Failed to load poster for ".concat(t.title,":"),t.poster),e.currentTarget.style.display="none"}}),(0,a.jsxs)(r.P.div,{initial:{opacity:0},whileHover:{opacity:1},className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent p-4 flex flex-col justify-end z-10",children:[(0,a.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,a.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e=>{e.stopPropagation(),b("love")},className:"p-2 rounded-full transition-colors ".concat("love"===n?"bg-red-500":"bg-white/20 backdrop-blur hover:bg-white/30"),children:(0,a.jsx)(d.A,{className:"w-5 h-5 ".concat("love"===n?"text-white fill-white":"text-white")})}),(0,a.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e=>{e.stopPropagation(),b("seen")},className:"p-2 rounded-full transition-colors ".concat("seen"===n?"bg-blue-500":"bg-white/20 backdrop-blur hover:bg-white/30"),children:(0,a.jsx)(m.A,{className:"w-5 h-5 ".concat("text-white")})}),(0,a.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e=>{e.stopPropagation(),b("not_interested")},className:"p-2 rounded-full transition-colors ".concat("not_interested"===n?"bg-gray-500":"bg-white/20 backdrop-blur hover:bg-white/30"),children:(0,a.jsx)(h.A,{className:"w-5 h-5 ".concat("text-white")})}),t.trailer_key&&(0,a.jsx)(r.P.a,{href:"https://youtube.com/watch?v=".concat(t.trailer_key),target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e=>e.stopPropagation(),className:"p-2 bg-red-600 rounded-full ml-auto hover:bg-red-700",children:(0,a.jsx)(x.A,{className:"w-5 h-5 text-white"})})]}),(0,a.jsx)("h3",{className:"text-white font-bold text-lg mb-1 line-clamp-2",children:t.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-white/80 text-sm mb-2",children:[(0,a.jsx)("span",{children:t.year}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-1 fill-yellow-400 text-yellow-400"}),(0,a.jsx)("span",{children:t.rating?t.rating.toFixed(1):"N/A"})]}),t.runtime&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[t.runtime," min"]})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:null==(s=t.genres)?void 0:s.slice(0,3).map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-white/20 backdrop-blur rounded-full text-xs text-white",children:e},e))})]})]}),(0,a.jsxs)("div",{className:"mt-3 px-1 relative z-0",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 line-clamp-1",children:t.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)("span",{children:t.year}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"w-3 h-3 mr-1 fill-yellow-400 text-yellow-400"}),(0,a.jsx)("span",{children:t.rating?t.rating.toFixed(1):"N/A"})]})]})]})]}),(0,a.jsx)("div",{className:"absolute inset-0 w-full h-full ".concat(j?"":"invisible"),style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:(0,a.jsx)("div",{className:"aspect-[2/3] rounded-xl overflow-hidden shadow-lg bg-gradient-to-br from-gray-900 to-gray-800 p-4 text-white",children:(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-1",children:t.title}),t.tagline&&(0,a.jsxs)("p",{className:"text-sm text-gray-300 italic",children:['"',t.tagline,'"']})]}),(0,a.jsx)("div",{className:"mb-3 flex-shrink",children:(0,a.jsx)("p",{className:"text-xs text-gray-300 line-clamp-4",children:t.overview})}),(t.director||t.cast)&&(0,a.jsxs)("div",{className:"mb-3",children:[t.director&&(0,a.jsxs)("p",{className:"text-xs mb-1",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Director:"})," ",t.director]}),t.cast&&t.cast.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"Cast:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:t.cast.slice(0,3).map((e,s)=>(0,a.jsx)("span",{className:"text-xs bg-white/10 px-2 py-1 rounded",children:e.name},s))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-3 text-xs",children:[t.runtime&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(p.A,{className:"w-3 h-3 text-gray-400"}),(0,a.jsxs)("span",{children:[t.runtime," min"]})]}),t.voteCount&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(g.A,{className:"w-3 h-3 text-gray-400"}),(0,a.jsxs)("span",{children:[t.voteCount.toLocaleString()," votes"]})]}),t.releaseDate&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(v.A,{className:"w-3 h-3 text-gray-400"}),(0,a.jsx)("span",{children:new Date(t.releaseDate).getFullYear()})]}),t.popularity&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.A,{className:"w-3 h-3 text-gray-400"}),(0,a.jsxs)("span",{children:[t.popularity.toFixed(0)," popularity"]})]})]}),(t.budget||t.revenue)&&(0,a.jsxs)("div",{className:"mb-3 text-xs",children:[t.budget&&t.budget>0&&(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Budget:"})," ",N(t.budget)]}),t.revenue&&t.revenue>0&&(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Revenue:"})," ",N(t.revenue)]})]}),t.streaming_providers&&t.streaming_providers.length>0&&(0,a.jsxs)("div",{className:"mt-auto",children:[(0,a.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"Available on:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:t.streaming_providers.slice(0,4).map((e,s)=>(0,a.jsx)("span",{className:"text-xs bg-white/10 px-2 py-1 rounded",children:"string"==typeof e?e:e.provider_name||"Unknown"},s))})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-auto pt-3",children:[t.trailer_key&&(0,a.jsxs)("a",{href:"https://youtube.com/watch?v=".concat(t.trailer_key),target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-red-600 hover:bg-red-700 py-2 px-3 rounded-lg text-xs font-medium text-center flex items-center justify-center gap-1",children:[(0,a.jsx)(x.A,{className:"w-3 h-3"}),"Trailer"]}),(0,a.jsx)("button",{onClick:()=>w(!1),className:"flex-1 bg-white/20 hover:bg-white/30 py-2 px-3 rounded-lg text-xs font-medium",children:"Back"})]})]})})})]}),t.isSurprise&&t.surpriseReason&&(0,a.jsx)(r.P.div,{initial:{opacity:0},whileHover:{opacity:1},className:"mt-2 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-black/90 text-white text-xs p-2 rounded-lg",children:["\uD83D\uDCA1 ",t.surpriseReason]})})]})}function j(e){let{recommendations:s,onMovieReaction:t,movieReactions:i}=e;return(0,a.jsx)(r.P.div,{layout:!0,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:(0,a.jsx)(n.N,{children:s.map((e,s)=>(0,a.jsx)(y,{movie:e,index:s,reaction:i[e.movieId],onReaction:s=>t(e.movieId,s)},e.movieId))})})}function w(e){let{moment:s,onDismiss:t}=e;return(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-3xl p-8 shadow-2xl relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-100 to-pink-100 opacity-50"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("button",{onClick:t,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,a.jsx)(h.A,{className:"w-5 h-5 text-gray-500"})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(r.P.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"text-6xl mb-4",children:s.emoji}),(0,a.jsx)("h2",{className:"text-3xl font-bold mb-2 text-gray-800",children:"Your Moment"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-6 max-w-md mx-auto",children:s.description}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[(0,a.jsx)("span",{children:"Confidence"}),(0,a.jsxs)("span",{children:[s.confidence,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)(r.P.div,{initial:{width:0},animate:{width:"".concat(s.confidence,"%")},transition:{delay:.5,duration:1},className:"h-full gradient-purple-pink rounded-full"})})]}),s.visualization&&s.visualization.dimensions&&(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:s.visualization.dimensions.map((e,s)=>(0,a.jsxs)(r.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+.1*s},className:"text-left",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-600",children:e.axis}),(0,a.jsxs)("span",{className:"text-gray-800 font-medium",children:[e.value,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)(r.P.div,{initial:{width:0},animate:{width:"".concat(e.value,"%")},transition:{delay:.6+.1*s,duration:.8},className:"h-full bg-gradient-to-r from-purple-400 to-pink-400 rounded-full"})})]},e.axis))}),(0,a.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"px-8 py-3 gradient-purple-pink text-white rounded-full font-semibold shadow-lg hover:shadow-xl transition-shadow",children:"Show me my movies!"})]})]})]})}var b=t(2098),N=t(790),I=t(3849),k=t(7340),S=t(1066);function P(e){let{onAdjust:s}=e,t=[{id:"lighter",label:"Lighter",icon:b.A,color:"from-yellow-400 to-orange-400"},{id:"deeper",label:"Deeper",icon:N.A,color:"from-blue-400 to-indigo-400"},{id:"weirder",label:"Weirder",icon:I.A,color:"from-purple-400 to-pink-400"},{id:"safer",label:"Safer",icon:k.A,color:"from-green-400 to-teal-400"},{id:"shorter",label:"Shorter",icon:p.A,color:"from-gray-400 to-gray-600"},{id:"longer",label:"Epic",icon:S.A,color:"from-red-400 to-rose-400"}];return(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("p",{className:"text-gray-600 text-center mb-4",children:"Quick mood adjustment:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:t.map((e,t)=>{let i=e.icon;return(0,a.jsxs)(r.P.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:.05*t},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>s(e.id),className:"px-4 py-2 bg-gradient-to-r ".concat(e.color," text-white rounded-full flex items-center gap-2 font-semibold shadow-md hover:shadow-xl transition-all"),children:[(0,a.jsx)(i,{className:"w-4 h-4"}),e.label]},e.id)})})]})}var A=t(844),F=t(5585);function T(){let{recommendations:e,moment:s,quickAdjust:t,refineRecommendations:o,trackInteraction:l}=(0,A.W)(),[c,d]=(0,i.useState)(!0),[m,h]=(0,i.useState)({});return(0,i.useEffect)(()=>{e.length>0&&c&&setTimeout(()=>{(0,F.A)({particleCount:100,spread:70,origin:{y:.6}})},500)},[e,c]),(0,a.jsxs)("div",{className:"relative min-h-screen",children:[(0,a.jsx)(n.N,{children:c&&s&&(0,a.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.jsx)(r.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"max-w-2xl w-full",children:(0,a.jsx)(w,{moment:s,onDismiss:()=>d(!1)})})})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gradient mb-2",children:"Your Perfect Matches"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Based on your mood and preferences"})]}),(0,a.jsx)(r.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,a.jsx)(P,{onAdjust:t})}),(0,a.jsx)(j,{recommendations:e,onMovieReaction:(e,s)=>{h(t=>({...t,[e]:s})),l(e,s)},movieReactions:m}),(0,a.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"text-center pb-12",children:(0,a.jsx)("button",{onClick:()=>{o(Object.entries(m).map(e=>{let[s,t]=e;return{movieId:s,reaction:t}}))},className:"px-8 py-4 gradient-purple-pink text-white rounded-full font-bold text-lg hover:shadow-2xl transform hover:scale-105 transition-all",children:"Get More Recommendations"})})]})]})}function L(){let e=(0,o.useRouter)(),s=(0,A.W)(),[t,n]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let t=localStorage.getItem("debug_recommendations"),a=localStorage.getItem("debug_sessionId");if(t&&a)try{let e=JSON.parse(t);if(e.recommendations&&e.recommendations.length>0){s.loadFromStorage({sessionId:a,recommendations:e.recommendations,moment:e.moment,validation:e.validation,emotionalProfile:e.emotionalProfile}),n(!0),console.log("[RecommendationsPage] Loaded debug data:",e.recommendations.length,"movies");return}}catch(e){console.error("[RecommendationsPage] Failed to parse debug data:",e)}let i=sessionStorage.getItem("recommendations_data"),o=sessionStorage.getItem("session_id");if(i&&o)try{let e=JSON.parse(i);if(e.recommendations&&e.recommendations.length>0){s.loadFromStorage({sessionId:o,recommendations:e.recommendations,moment:e.moment,validation:e.validation,emotionalProfile:e.emotionalProfile}),n(!0),console.log("[RecommendationsPage] Loaded session data:",e.recommendations.length,"movies");return}}catch(e){console.error("[RecommendationsPage] Failed to parse session data:",e)}s.sessionId&&0!==s.recommendations.length?n(!0):(console.log("[RecommendationsPage] No data available, redirecting to home"),e.push("/"))},[]),t||0!==s.recommendations.length)?(0,a.jsx)("div",{className:"min-h-screen",children:(0,a.jsx)(T,{})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading recommendations..."})]})})}},8897:(e,s,t)=>{"use strict";t.d(s,{F:()=>i});class a{async startSession(e){console.log("[API] Starting session with URL:","".concat(this.baseURL,"/api/movies/start")),console.log("[API] Options:",e);let s=await fetch("".concat(this.baseURL,"/api/movies/start"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(console.log("[API] Response status:",s.status),!s.ok)throw console.error("[API] Error response:",await s.text()),Error("Failed to start session: ".concat(s.statusText));let t=await s.json();return console.log("[API] Response data:",t),this.sessionId=t.sessionId,t}async submitAnswer(e,s,t){if(!this.sessionId)throw Error("No active session");let a=await fetch("".concat(this.baseURL,"/api/movies/answer/").concat(this.sessionId),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionId:e,answer:s,responseTime:t})});if(!a.ok)throw Error("Failed to submit answer: ".concat(a.statusText));return a.json()}async refineRecommendations(e,s){if(!this.sessionId)throw Error("No active session");let t=await fetch("".concat(this.baseURL,"/api/movies/refine/").concat(this.sessionId),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:e,action:s})});if(!t.ok)throw Error("Failed to refine recommendations: ".concat(t.statusText));return t.json()}async quickAdjust(e){if(!this.sessionId)throw Error("No active session");let s=await fetch("".concat(this.baseURL,"/api/movies/adjust/").concat(this.sessionId),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adjustmentType:e})});if(!s.ok)throw Error("Failed to adjust: ".concat(s.statusText));return s.json()}async validateMoment(e,s){if(!this.sessionId)throw Error("No active session");let t=await fetch("".concat(this.baseURL,"/api/movies/validate/").concat(this.sessionId),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedbackType:e,response:s})});if(!t.ok)throw Error("Failed to validate moment: ".concat(t.statusText));return t.json()}async getMomentSummary(){if(!this.sessionId)throw Error("No active session");let e=await fetch("".concat(this.baseURL,"/api/movies/moment/").concat(this.sessionId));if(!e.ok)throw Error("Failed to get moment summary: ".concat(e.statusText));return e.json()}async trackInteraction(e,s,t){if(!this.sessionId)throw Error("No active session");let a=await fetch("".concat(this.baseURL,"/api/movies/interaction/").concat(this.sessionId),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({movieId:e,interactionType:s,metadata:t})});if(!a.ok)throw Error("Failed to track interaction: ".concat(a.statusText));return a.json()}async getMovieDetails(e){let s=await fetch("".concat(this.baseURL,"/api/movies/").concat(e));if(!s.ok)throw Error("Failed to get movie details: ".concat(s.statusText));return s.json()}async getAnalytics(e){let s=await fetch("".concat(this.baseURL,"/api/analytics/").concat(e));if(!s.ok)throw Error("Failed to get analytics: ".concat(s.statusText));return s.json()}setSessionId(e){this.sessionId=e}getSessionId(){return this.sessionId}clearSession(){this.sessionId=null}constructor(){this.sessionId=null,this.baseURL="",console.log("[API] Using Pages Functions (same domain)")}}let i=new a}},e=>{e.O(0,[297,324,441,964,358],()=>e(e.s=4557)),_N_E=e.O()}]);